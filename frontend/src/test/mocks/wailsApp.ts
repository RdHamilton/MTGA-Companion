import { vi } from 'vitest';

export const mockWailsApp = {
  AnalyzeSessionPickQuality: vi.fn(() => Promise.resolve()),
  CalculateDraftGrade: vi.fn(() => Promise.resolve({} as any)),
  ClearAllData: vi.fn(() => Promise.resolve()),
  ClearDatasetCache: vi.fn(() => Promise.resolve()),
  ExportDeck: vi.fn(() => Promise.resolve({} as any)),
  ExportToCSV: vi.fn(() => Promise.resolve()),
  ExportToJSON: vi.fn(() => Promise.resolve()),
  FetchSetCards: vi.fn(() => Promise.resolve(0)),
  FetchSetRatings: vi.fn(() => Promise.resolve()),
  FixDraftSessionStatuses: vi.fn(() => Promise.resolve(0)),
  GetActiveDraftSessions: vi.fn(() => Promise.resolve([] as any[])),
  GetActiveQuests: vi.fn(() => Promise.resolve([] as any)),
  GetCurrentAccount: vi.fn(() => Promise.resolve(null as any)),
  GetQuestHistory: vi.fn(() => Promise.resolve([] as any)),
  GetArchetypeCards: vi.fn(() => Promise.resolve({} as any)),
  GetCardByArenaID: vi.fn((_arenaID?: string) => Promise.resolve({} as any)),
  GetCardRatingByArenaID: vi.fn(() => Promise.resolve({} as any)),
  GetCardRatings: vi.fn(() => Promise.resolve([] as any[])),
  GetColorRatings: vi.fn(() => Promise.resolve([] as any[])),
  GetCompletedDraftSessions: vi.fn(() => Promise.resolve([] as any[])),
  GetConnectionStatus: vi.fn(() => Promise.resolve({} as any)),
  GetDeckDetails: vi.fn(() => Promise.resolve({} as any)),
  GetDraftDeckMetrics: vi.fn(() => Promise.resolve({} as any)),
  GetDraftGrade: vi.fn(() => Promise.resolve(null as any)),
  GetDraftWinRatePrediction: vi.fn(() => Promise.resolve(null)),
  GetDraftPacks: vi.fn(() => Promise.resolve([] as any[])),
  GetDraftPicks: vi.fn(() => Promise.resolve([] as any[])),
  GetFormatArchetypes: vi.fn(() => Promise.resolve([] as any[])),
  GetFormatInsights: vi.fn(() => Promise.resolve({} as any)),
  GetFormatStats: vi.fn(() => Promise.resolve({} as any)),
  GetMatches: vi.fn(() => Promise.resolve([] as any)),
  GetMatchesBySessionID: vi.fn(() => Promise.resolve([] as any[])),
  GetMatchGames: vi.fn(() => Promise.resolve([] as any)),
  GetMissingCards: vi.fn(() => Promise.resolve(null)),
  GetPerformanceMetrics: vi.fn(() => Promise.resolve([] as any[])),
  GetPickAlternatives: vi.fn(() => Promise.resolve([] as any[])),
  PredictDraftWinRate: vi.fn(() => Promise.resolve({} as any)),
  GetRankProgressionTimeline: vi.fn(() => Promise.resolve({} as any)),
  GetSetCards: vi.fn(() => Promise.resolve([] as any[])),
  GetSetInfo: vi.fn((_setCode?: string) => Promise.resolve({} as any)),
  GetAllSetInfo: vi.fn(() => Promise.resolve([] as any[])),
  SearchCards: vi.fn((_query?: string, _setCodes?: string[], _limit?: number) => Promise.resolve([] as any[])),
  SearchCardsWithCollection: vi.fn((_query?: string, _setCodes?: string[], _limit?: number, _collectionOnly?: boolean) => Promise.resolve([] as any[])),
  GetStats: vi.fn(() => Promise.resolve({} as any)),
  GetStatsByDeck: vi.fn(() => Promise.resolve({} as any)),
  GetStatsByFormat: vi.fn(() => Promise.resolve({} as any)),
  GetTrendAnalysis: vi.fn(() => Promise.resolve({} as any)),
  ImportLogs: vi.fn(() => Promise.resolve()),
  PauseReplay: vi.fn(() => Promise.resolve()),
  ResumeReplay: vi.fn(() => Promise.resolve()),
  StopReplay: vi.fn(() => Promise.resolve()),
  StartReplayWithFileDialog: vi.fn(() => Promise.resolve()),
  RefreshSetRatings: vi.fn(() => Promise.resolve()),
  RefreshSetCards: vi.fn(() => Promise.resolve(0)),
  RecalculateAllDraftGrades: vi.fn(() => Promise.resolve(0)),
  GetDatasetSource: vi.fn(() => Promise.resolve('s3')),
  SetDaemonPort: vi.fn(() => Promise.resolve()),
  ReconnectToDaemon: vi.fn(() => Promise.resolve()),
  SwitchToStandaloneMode: vi.fn(() => Promise.resolve()),
  SwitchToDaemonMode: vi.fn(() => Promise.resolve()),
  ImportFromFile: vi.fn(() => Promise.resolve()),
  ImportLogFile: vi.fn(() => Promise.resolve(null)),
  TriggerReplayLogs: vi.fn(() => Promise.resolve()),
  ValidateDraftDeck: vi.fn(() => Promise.resolve(true)),
  ValidateDeckWithDialog: vi.fn(() => Promise.resolve()),
  AddCard: vi.fn(() => Promise.resolve()),
  RemoveCard: vi.fn(() => Promise.resolve()),
  GetDeck: vi.fn(() => Promise.resolve({} as any)),
  GetDeckStatistics: vi.fn(() => Promise.resolve({} as any)),
  GetDeckByDraftEvent: vi.fn(() => Promise.resolve({} as any)),
  CreateDeck: vi.fn(() => Promise.resolve({} as any)),
  DeleteDeck: vi.fn(() => Promise.resolve()),
  ListDecks: vi.fn(() => Promise.resolve([] as any)),
  GetRecommendations: vi.fn(() => Promise.resolve({} as any)),
  ExplainRecommendation: vi.fn(() => Promise.resolve({ explanation: 'This card is recommended because...', error: '' } as any)),
  ExportDeckToFile: vi.fn(() => Promise.resolve()),
  // Collection methods
  GetCollection: vi.fn(() => Promise.resolve({ cards: [], totalCount: 0, filterCount: 0 } as any)),
  GetCollectionStats: vi.fn(() => Promise.resolve({} as any)),
  GetSetCompletion: vi.fn(() => Promise.resolve([] as any[])),
  GetRecentCollectionChanges: vi.fn(() => Promise.resolve([] as any[])),
  // Meta methods
  GetMetaDashboard: vi.fn(() => Promise.resolve({
    format: 'standard',
    archetypes: [],
    tournaments: [],
    totalArchetypes: 0,
    lastUpdated: new Date().toISOString(),
    sources: ['mtggoldfish', 'mtgtop8'],
    error: '',
  } as any)),
  RefreshMetaData: vi.fn(() => Promise.resolve({
    format: 'standard',
    archetypes: [],
    tournaments: [],
    totalArchetypes: 0,
    lastUpdated: new Date().toISOString(),
    sources: ['mtggoldfish', 'mtgtop8'],
    error: '',
  } as any)),
  GetSupportedFormats: vi.fn(() => Promise.resolve(['standard', 'historic', 'explorer', 'pioneer', 'modern'])),
  GetTierArchetypes: vi.fn(() => Promise.resolve([] as any[])),
  // ML/LLM methods
  CheckOllamaStatus: vi.fn(() => Promise.resolve({
    available: true,
    version: '0.1.0',
    modelReady: true,
    modelName: 'qwen3:8b',
    modelsLoaded: ['qwen3:8b'],
    error: '',
  } as any)),
  GetAvailableOllamaModels: vi.fn(() => Promise.resolve([{ name: 'qwen3:8b', size: 0 }] as any[])),
  PullOllamaModel: vi.fn(() => Promise.resolve()),
  TestLLMGeneration: vi.fn(() => Promise.resolve('Hello from Ollama!')),
  // Settings methods
  GetAllSettings: vi.fn(() => Promise.resolve({
    autoRefresh: false,
    refreshInterval: 30,
    showNotifications: true,
    theme: 'dark',
    daemonPort: 9999,
    daemonMode: 'standalone',
    mlEnabled: true,
    llmEnabled: false,
    ollamaEndpoint: 'http://localhost:11434',
    ollamaModel: 'qwen3:8b',
    metaGoldfishEnabled: true,
    metaTop8Enabled: true,
    metaWeight: 0.3,
    personalWeight: 0.2,
  } as any)),
  SaveAllSettings: vi.fn(() => Promise.resolve()),
};

export function resetMocks() {
  Object.values(mockWailsApp).forEach((mock) => {
    if (vi.isMockFunction(mock)) {
      mock.mockClear();
    }
  });
}
